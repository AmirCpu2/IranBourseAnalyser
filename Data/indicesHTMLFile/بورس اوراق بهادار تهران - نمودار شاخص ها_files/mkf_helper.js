!function(t){var o=function(e,i){switch(e.dir.toLowerCase()){case"top":this.widthStr="0 "+this.defaultBig/2+"px "+this.defaultSmall+"px "+this.defaultBig/2+"px";break;case"right":this.widthStr=this.defaultBig/2+"px 0 "+this.defaultBig/2+"px "+this.defaultSmall+"px";break;case"left":this.widthStr=this.defaultBig/2+"px "+this.defaultBig/2+"px "+this.defaultSmall+"px 0 ";break;case"bottom":this.widthStr=this.defaultSmall+"px "+this.defaultBig/2+"px 0 "+this.defaultBig/2+"px"}this.$obj=t("<div>",{"class":"mkf_helper",text:e.phrase,id:"mkf_helper_"+e.idx}).css({"background-color":i.cl,"box-shadow":"none"}).appendTo(this.$body),"yes"==i.show.toLowerCase()&&this.$obj.show(),this.getTopPos(this.$obj,e),o.prototype.arr.push(this.$obj[0]);var r="top"==e.dir.toLowerCase()||"bottom"==e.dir.toLowerCase()?"width:"+this.defaultBig+"px;left:50%;height:"+this.defaultSmall+"px":"height:"+this.defaultBig+"px;top:50%;width:"+this.defaultSmall+"px";this.$anchorContainer=t("<div>",{"class":"mkf_helper_anchor_container"}).attr("style",r+";"+e.dir+":-"+(this.defaultSmall-1)+"px").css("position","absolute").appendTo(this.$obj),this.$anchor=t("<div>",{"class":"mkf_helper_anchor"}).css({width:0,height:0,"border-style":"solid","border-width":this.widthStr,"border-color":this.makeColorStr(this.dir[e.dir],i.cl)}).appendTo(this.$anchorContainer),"top"==e.dir||"bottom"==e.dir?this.$anchor.css({left:"-50%"}):this.$anchor.css({top:"-50%"})};o.prototype.$body=t("body"),o.prototype.defaultBig=14,o.prototype.defaultSmall=8,o.prototype.arr=[],o.prototype.makeColorStr=function(t,o){for(var e="",i=0;4>i;i++)e+=i==(t+2)%4?o:" transparent ";return e},o.prototype.dir={top:0,right:1,bottom:2,left:3},o.prototype.getTopPos=function(o,e){var i,r,h=t(document.getElementById(e.idx)),s=h.offset(),a=h.outerWidth(),l=h.outerHeight();"bottom"==e.dir?(i=a>this.$obj.outerWidth()?s.left-(this.$obj.outerWidth()/2-a/2):s.left+(a/2-this.$obj.outerWidth()/2),r=s.top-(this.$obj.outerHeight()+this.defaultSmall)+"px"):"top"==e.dir?(i=a>this.$obj.outerWidth()?s.left-(this.$obj.outerWidth()/2-a/2):s.left+(a/2-this.$obj.outerWidth()/2),r=s.top+(h.outerHeight()+this.defaultSmall)+"px"):"left"==e.dir?(i=s.left+h.outerWidth()+this.defaultSmall,r=l>this.$obj.outerHeight?s.top+(l-this.$obj.outerHeight())/2:s.top-(this.$obj.outerHeight()-l)/2):(i=s.left-(this.$obj.outerWidth()+this.defaultSmall),r=l>this.$obj.outerHeight?s.top+(l-this.$obj.outerHeight())/2:s.top-(this.$obj.outerHeight()-l)/2),o.css({left:i+"px",top:r})},t.fn.mkf_reHelper=function(e,i){t.each(e,function(e,r){var h=t(document.getElementById("mkf_helper_"+r.idx_before));h.remove();{var s={cl:"rgb(136,183,160)",show:"no"},a=t.extend({},s,i);new o(r,a)}})},t.fn.mkf_helper=function(e,i){var r={cl:"rgb(136,183,160)",show:"no"},h=t.extend({},r,i);t.each(e,function(t,e){new o(e,h)}),void 0==e[0].anim?this.off("click").on("click",function(e){e.stopPropagation(),t(o.prototype.arr).finish().fadeToggle(200)}):"hover"==e[0].anim&&this.off("hover").hover(function(){e[0].idx_before=e[0].idx,t(this).mkf_reHelper(e,i),t(o.prototype.arr).finish().fadeIn(200)},function(){t(o.prototype.arr).finish().fadeOut(200)}),o.prototype.$body.off("click").on("click",function(){t(o.prototype.arr).finish().fadeOut(100)}),t(window).on("scroll",function(){t(o.prototype.arr).finish().fadeOut(100)}),t(window).on("resize",function(){t(o.prototype.arr).finish().fadeOut(100)})}}(jQuery);